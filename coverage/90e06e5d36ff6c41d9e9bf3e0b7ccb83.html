<!DOCTYPE html>
<html>
<head>
  <!-- Autogenerated by crystal-cover v0.1 -->
  <title>Coverage of src/webhooks/events.cr</title>
  <meta charset="UTF-8">
  <style>
    html, body {
      margin: 0;
      font-family: 'Helvetica Neue', 'Arial', sans-serif;
    }

    section {
      max-width: 1024px;
      margin: auto;
    }

    .covered-code {
      background-color: #333;
      color: white;
      padding: 0.25em 1em;
    }

    .line-number, pre {
      font-size: 1rem;
      font-family: 'Courier', 'FreeMono', monospace;
    }

    .line-number {
      margin: 0;
      padding: 0;

      color: #eee;

      float:left;
      height: 1.25em;
      width: 4em;
      border-right: solid 1px white;
      margin-right: 0.5em;

      cursor: default;
    }

    pre.irrelevant-line {
      opacity: 0.9;
    }

    pre.relevant-line{
      background-color: #733;
    }

    pre.relevant-line.covered{
      background-color: #373;
    }

    .hit-count {
      position: absolute;
      padding: 0.3rem;
      font-size: 0.5rem;
      right: 0;
      top: 0;
      background: #ccc;
      color: black;
      min-width: 30px;
      text-align: center;
      opacity: 0.2;
      cursor: default;
    }

    .line {
      position: relative;
    }

    .line:hover .hit-count {
      opacity: 1;
    }

    .line:hover pre {
      background-color: #337;
    }

    pre {
      margin: 0;
      padding: 0;

      height: 1.25em;
      padding-left: 10px;
    }
  </style>
</head>
<body>
  <section id="general-coverage">
    <h1>Cover for src/webhooks/events.cr</h1>
    <hr>
    <table class="cover-table">
      <thead>
        <th>Hitted lines</th>
        <th>Relevant lines</th>
        <th>Percentage</th>
      </thead>
      <tbody>
        <tr>
          <td>7</td>
          <td>7</td>
          <td class="low">100.0%</td>
        </tr>
      </tbody>
    </table>
  </section>
  <section id="detailed-coverage">
    <hr>
    <div class="covered-code">
        <div class="line">
          <div class="line-number">1</div>
          <pre class="irrelevant-line ">require &quot;json&quot;</pre>
        </div>
        <div class="line">
          <div class="line-number">2</div>
          <pre class="irrelevant-line ">require &quot;inflector/core_ext&quot;</pre>
        </div>
        <div class="line">
          <div class="line-number">3</div>
          <pre class="irrelevant-line "></pre>
        </div>
        <div class="line">
          <div class="line-number">4</div>
          <pre class="irrelevant-line "># Example code that deserializes and serializes the Gitlab Hooks:</pre>
        </div>
        <div class="line">
          <div class="line-number">5</div>
          <pre class="irrelevant-line "># https://crystal-lang.org/api/0.26.1/JSON/Serializable.html</pre>
        </div>
        <div class="line">
          <div class="line-number">6</div>
          <pre class="irrelevant-line "># https://gitlab.com/gitlab-org/gitlab-ce/blob/master/app/helpers/hooks_helper.rb</pre>
        </div>
        <div class="line">
          <div class="line-number">7</div>
          <pre class="irrelevant-line "># List of the system hooks</pre>
        </div>
        <div class="line">
          <div class="line-number">8</div>
          <pre class="irrelevant-line "># https://docs.gitlab.com/ee/system_hooks/system_hooks.html</pre>
        </div>
        <div class="line">
          <div class="line-number">9</div>
          <pre class="irrelevant-line "># https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/api/system_hooks.md</pre>
        </div>
        <div class="line">
          <div class="line-number">10</div>
          <pre class="irrelevant-line "># List of project project hooks</pre>
        </div>
        <div class="line">
          <div class="line-number">11</div>
          <pre class="irrelevant-line "># https://docs.gitlab.com/ee/api/projects.html#list-project-hooks</pre>
        </div>
        <div class="line">
          <div class="line-number">12</div>
          <pre class="irrelevant-line "></pre>
        </div>
        <div class="line">
          <div class="line-number">13</div>
          <pre class="irrelevant-line ">module Gitlab</pre>
        </div>
        <div class="line">
          <div class="line-number">14</div>
          <div class="hit-count">1</div>
          <pre class="relevant-line covered">  Events = {} of String =&gt; Gitlab::Event.class</pre>
        </div>
        <div class="line">
          <div class="line-number">15</div>
          <pre class="irrelevant-line "></pre>
        </div>
        <div class="line">
          <div class="line-number">16</div>
          <pre class="irrelevant-line ">  @[JSON::Serializable::Options(emit_nulls: true)]</pre>
        </div>
        <div class="line">
          <div class="line-number">17</div>
          <pre class="irrelevant-line ">  abstract class Event</pre>
        </div>
        <div class="line">
          <div class="line-number">18</div>
          <pre class="irrelevant-line ">    include JSON::Serializable</pre>
        </div>
        <div class="line">
          <div class="line-number">19</div>
          <div class="hit-count">1</div>
          <pre class="relevant-line covered">    property event_name : String?</pre>
        </div>
        <div class="line">
          <div class="line-number">20</div>
          <div class="hit-count">1</div>
          <pre class="relevant-line covered">    property object_kind : String?</pre>
        </div>
        <div class="line">
          <div class="line-number">21</div>
          <div class="hit-count">1</div>
          <pre class="relevant-line covered">    property event_type : String?</pre>
        </div>
        <div class="line">
          <div class="line-number">22</div>
          <pre class="irrelevant-line "></pre>
        </div>
        <div class="line">
          <div class="line-number">23</div>
          <pre class="irrelevant-line ">    macro timestamps</pre>
        </div>
        <div class="line">
          <div class="line-number">24</div>
          <pre class="irrelevant-line ">      # https://github.com/crystal-lang/crystal/blob/master/src/json/from_json.cr#L233</pre>
        </div>
        <div class="line">
          <div class="line-number">25</div>
          <pre class="irrelevant-line ">      property created_at : Time</pre>
        </div>
        <div class="line">
          <div class="line-number">26</div>
          <pre class="irrelevant-line ">      property updated_at : Time</pre>
        </div>
        <div class="line">
          <div class="line-number">27</div>
          <pre class="irrelevant-line ">    end</pre>
        </div>
        <div class="line">
          <div class="line-number">28</div>
          <pre class="irrelevant-line "></pre>
        </div>
        <div class="line">
          <div class="line-number">29</div>
          <pre class="irrelevant-line ">    # Save a reference of all subclasses</pre>
        </div>
        <div class="line">
          <div class="line-number">30</div>
          <pre class="irrelevant-line ">    macro inherited</pre>
        </div>
        <div class="line">
          <div class="line-number">31</div>
          <pre class="irrelevant-line ">      key = Inflector.underscore(&quot;{{@type.name}}&quot;.split(&quot;::&quot;).last.to_s)</pre>
        </div>
        <div class="line">
          <div class="line-number">32</div>
          <pre class="irrelevant-line ">      Events[key] = {{@type}}</pre>
        </div>
        <div class="line">
          <div class="line-number">33</div>
          <pre class="irrelevant-line ">    end</pre>
        </div>
        <div class="line">
          <div class="line-number">34</div>
          <pre class="irrelevant-line ">  end</pre>
        </div>
        <div class="line">
          <div class="line-number">35</div>
          <pre class="irrelevant-line "></pre>
        </div>
        <div class="line">
          <div class="line-number">36</div>
          <pre class="irrelevant-line ">  # Factory method to build events from JSON payloads</pre>
        </div>
        <div class="line">
          <div class="line-number">37</div>
          <pre class="irrelevant-line ">  def self.event_from(json : String) : Event</pre>
        </div>
        <div class="line">
          <div class="line-number">38</div>
          <div class="hit-count">2500</div>
          <pre class="relevant-line covered">    payload = JSON.parse(json)</pre>
        </div>
        <div class="line">
          <div class="line-number">39</div>
          <div class="hit-count">2500</div>
          <pre class="relevant-line covered">    event_name = payload[&quot;event_name&quot;]? || payload[&quot;event_type&quot;]? || payload[&quot;object_kind&quot;]</pre>
        </div>
        <div class="line">
          <div class="line-number">40</div>
          <div class="hit-count">2500</div>
          <pre class="relevant-line covered">    Events[event_name].from_json(json)</pre>
        </div>
        <div class="line">
          <div class="line-number">41</div>
          <pre class="irrelevant-line ">  end</pre>
        </div>
        <div class="line">
          <div class="line-number">42</div>
          <pre class="irrelevant-line ">end</pre>
        </div>
        <div class="line">
          <div class="line-number">43</div>
          <pre class="irrelevant-line "></pre>
        </div>
        <div class="line">
          <div class="line-number">44</div>
          <pre class="irrelevant-line ">require &quot;./common&quot;</pre>
        </div>
        <div class="line">
          <div class="line-number">45</div>
          <pre class="irrelevant-line ">require &quot;./system&quot;</pre>
        </div>
        <div class="line">
          <div class="line-number">46</div>
          <pre class="irrelevant-line ">require &quot;./project&quot;</pre>
        </div>
        <div class="line">
          <div class="line-number">47</div>
          <pre class="irrelevant-line "></pre>
        </div>
    </div>
  </section>
</body>
</html>
